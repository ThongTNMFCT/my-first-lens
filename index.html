<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thong Tran | My First Lens Photography</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        darkBg: '#050505',
                        lightBg: '#fafafa',
                        accent: '#c5a059',
                    },
                    animation: {
                        'reveal': 'reveal 1.2s cubic-bezier(0.77, 0, 0.175, 1) forwards',
                        'fade-in': 'fadeIn 1s ease-out forwards',
                    },
                    keyframes: {
                        reveal: {
                            '0%': { transform: 'translateY(100%)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { scroll-behavior: smooth; }
        .glass-nav {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .text-stroke {
            -webkit-text-stroke: 1px currentColor;
            color: transparent;
        }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        .reveal-container { overflow: hidden; }
        
        /* Shimmer effect for loading */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body class="bg-lightBg dark:bg-darkBg text-zinc-900 dark:text-zinc-100 antialiased transition-colors duration-500">

    <!-- Navigation -->
    <nav id="navbar" class="fixed top-0 left-0 w-full z-50 px-6 py-6 transition-all duration-500">
        <div class="max-w-screen-2xl mx-auto flex justify-between items-center">
            <a href="index.html" class="font-serif text-2xl font-bold tracking-tighter hover:text-accent transition-colors">
                Thong Tran<span class="text-accent">.</span>
            </a>

            <div class="hidden md:flex items-center gap-12 text-[10px] font-semibold uppercase tracking-[0.3em]">
                <a href="collection.html" class="hover:text-accent transition-all relative group" data-i18n="nav_collection">
                    Bộ Sưu Tập
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-accent transition-all duration-500 group-hover:w-full"></span>
                </a>
                <a href="about-me.html" class="hover:text-accent transition-all relative group" data-i18n="nav_about">
                    Góc Nhìn
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-accent transition-all duration-500 group-hover:w-full"></span>
                </a>
            </div>

            <div class="flex items-center gap-6">
                <!-- Lang Toggle UI -->
                <div class="hidden sm:flex items-center gap-3 text-[9px] font-bold tracking-widest">
                    <button onclick="setLanguage('vi')" id="btn-vi" class="opacity-40 hover:opacity-100 transition-opacity">VIE</button>
                    <span class="opacity-20">/</span>
                    <button onclick="setLanguage('en')" id="btn-en" class="opacity-40 hover:opacity-100 transition-opacity">ENG</button>
                </div>
                
                <!-- Theme Toggle -->
                <button id="theme-toggle" class="w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-all">
                    <i class="fas fa-moon dark:hidden text-xs"></i> 
                    <i class="fas fa-sun hidden dark:block text-xs text-yellow-500"></i>
                </button>

                <a href="admin.html" class="text-zinc-400 hover:text-accent transition-colors">
                    <i class="fas fa-fingerprint text-sm"></i>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative min-h-screen w-full flex flex-col justify-center items-center pt-20 overflow-hidden">
        <div class="absolute top-1/4 left-10 hidden lg:block rotate-90 origin-left">
            <p class="text-[9px] uppercase tracking-[0.5em] opacity-30 font-bold" data-i18n="hero_subtitle">EST. 2026 / Visual Storyteller</p>
        </div>

        <div class="relative z-10 text-center select-none">
            <div class="reveal-container">
                <h1 class="font-serif text-[11vw] md:text-[8vw] lg:text-[7vw] leading-[0.9] italic font-light opacity-0 animate-reveal">
                    I'm <span class="font-bold not-italic">Thong Tran</span>
                </h1>
            </div>

            <div class="reveal-container mt-4">
                <p class="text-[12px] md:text-[14px] font-sans uppercase tracking-[0.8em] text-zinc-500 dark:text-zinc-400 font-medium opacity-0 animate-reveal" style="animation-delay: 0.3s;">
                    My First Lens
                </p>
            </div>
            
            <div class="mt-12 flex flex-col md:flex-row items-center justify-center gap-6 opacity-0 animate-fade-in" style="animation-delay: 1s;">
                <p class="text-[11px] uppercase tracking-[0.4em] font-medium text-zinc-500">
                    <span data-i18n="hero_desc_prefix">Lưu giữ khoảnh khắc qua</span> <span class="text-zinc-900 dark:text-zinc-100 italic">Perspective</span>
                </p>
                <div class="h-[1px] w-12 bg-accent opacity-50"></div>
                <a href="#work" class="text-[11px] uppercase tracking-[0.4em] font-bold text-accent hover:tracking-[0.6em] transition-all duration-500" data-i18n="btn_explore">
                    Vào Thư Viện
                </a>
            </div>
        </div>

        <div class="absolute inset-0 -z-10 flex items-center justify-center opacity-20 dark:opacity-30">
            <img src="https://images.unsplash.com/photo-1493863641943-9b68992a8d07?q=80&w=2058&auto=format&fit=crop" 
                 class="w-full h-full object-cover grayscale blur-sm" alt="Atmospheric background">
        </div>

        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-4 opacity-30">
            <div class="w-[1px] h-16 bg-gradient-to-b from-zinc-500 to-transparent"></div>
        </div>
    </header>

    <!-- Featured Section (DYNAMIC ALBUMS) -->
    <section id="work" class="py-32 px-6 md:px-20 max-w-screen-2xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-16 items-start">
            
            <!-- Left Info -->
            <div class="lg:col-span-4 space-y-10">
                <div class="space-y-4">
                    <span class="text-accent text-xs font-bold uppercase tracking-widest" data-i18n="featured_tag">Tác phẩm nổi bật</span>
                    <h2 class="font-serif text-5xl italic leading-tight" data-i18n="intro_title">
                        Gói ghém điều <br> 
                        <span class="not-italic font-bold">Thoáng qua.</span>
                    </h2>
                </div>
                
                <p class="text-sm leading-relaxed text-zinc-500 dark:text-zinc-400 font-light text-justify" data-i18n="quote_text">
                    Nhiếp ảnh với mình không chỉ là kỹ thuật, mà là cách để lưu giữ sự thuần khiết của ánh sáng và cảm xúc tại một thời điểm duy nhất. Mỗi bức hình là một chương trong cuốn nhật ký thị giác.
                </p>

                <div class="pt-10 border-t border-zinc-200 dark:border-zinc-800">
                    <a href="collection.html" class="inline-flex items-center gap-4 group">
                        <span class="text-[10px] uppercase font-bold tracking-widest group-hover:text-accent transition-colors" data-i18n="link_view_collections">Xem Bộ Sưu Tập</span>
                        <div class="w-8 h-8 rounded-full border border-zinc-300 dark:border-zinc-700 flex items-center justify-center group-hover:border-accent group-hover:bg-accent group-hover:text-white transition-all">
                            <i class="fas fa-arrow-right text-[10px]"></i>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Right Dynamic Grid -->
            <div id="featured-albums-container" class="lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Loading State Shimmers -->
                <div class="aspect-[3/4] bg-zinc-100 dark:bg-zinc-900 shimmer rounded-sm"></div>
                <div class="aspect-[3/4] bg-zinc-100 dark:bg-zinc-900 shimmer rounded-sm md:mt-12"></div>
            </div>
        </div>
    </section>

    <!-- Marquee Banner -->
    <section class="w-full py-20 bg-zinc-100 dark:bg-zinc-900/50 overflow-hidden relative">
        <div class="flex whitespace-nowrap animate-[marquee_30s_linear_infinite] opacity-5">
            <span class="text-[15vh] font-serif italic px-8 text-stroke">MOMENTS</span>
            <span class="text-[15vh] font-serif italic px-8 text-stroke">MEMORIES</span>
            <span class="text-[15vh] font-serif italic px-8 text-stroke">LIGHT</span>
            <span class="text-[15vh] font-serif italic px-8 text-stroke">ETERNITY</span>
        </div>
        
        <div class="absolute inset-0 flex items-center justify-center">
             <a href="collection.html" class="px-12 py-5 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 text-[10px] uppercase font-bold tracking-[0.4em] hover:bg-accent dark:hover:bg-accent transition-colors" data-i18n="link_view_all">
                Xem kho lưu trữ
             </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-20 px-6 border-t border-zinc-200 dark:border-zinc-800">
        <div class="max-w-screen-2xl mx-auto flex flex-col md:flex-row justify-between items-center gap-10">
            <div class="text-center md:text-left">
                <p class="font-serif text-3xl font-bold italic mb-2">Thong Tran<span class="text-accent">.</span></p>
                <p class="text-[9px] uppercase tracking-[0.2em] opacity-40">&copy; 2026 Thong Tran. All rights reserved.</p>
                <!-- Day Counter -->
                <div class="mt-4 flex items-center gap-2 justify-center md:justify-start opacity-60">
                    <div class="w-2 h-2 rounded-full bg-accent animate-pulse"></div>
                    <p class="text-[9px] uppercase tracking-widest font-bold">
                        <span data-i18n="journey_text">Hành trình</span>: <span id="days-count" class="text-zinc-900 dark:text-zinc-100">0</span> <span data-i18n="days_label">Ngày</span>
                    </p>
                </div>
            </div>
            
            <div class="flex gap-8 text-xs font-bold uppercase tracking-widest">
                <a href="#" class="hover:text-accent transition-colors">Instagram</a>
                <a href="#" class="hover:text-accent transition-colors">Facebook</a>
                <a href="#" class="hover:text-accent transition-colors">Behance</a>
            </div>
        </div>
    </footer>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="config.js"></script>

    <script>
        // --- 1. LANGUAGE LOGIC & DATA ---
        const translations = {
            vi: {
                nav_collection: "Bộ Sưu Tập",
                nav_about: "Góc Nhìn",
                hero_subtitle: "EST. 2026 / Người kể chuyện bằng hình ảnh",
                hero_desc_prefix: "Lưu giữ khoảnh khắc qua",
                btn_explore: "Vào Thư Viện",
                featured_tag: "Tác phẩm nổi bật",
                intro_title: "Gói ghém điều <br><span class='not-italic font-bold'>Thoáng qua.</span>",
                quote_text: "Nhiếp ảnh với mình không chỉ là kỹ thuật, mà là cách để lưu giữ sự thuần khiết của ánh sáng và cảm xúc tại một thời điểm duy nhất. Mỗi bức hình là một chương trong cuốn nhật ký thị giác.",
                link_view_collections: "Xem Bộ Sưu Tập",
                link_view_all: "Xem kho lưu trữ",
                photos_text: "Ảnh",
                journey_text: "Hành trình",
                days_label: "Ngày"
            },
            en: {
                nav_collection: "Collection",
                nav_about: "Perspective",
                hero_subtitle: "EST. 2026 / Visual Storyteller",
                hero_desc_prefix: "Capturing moments through",
                btn_explore: "Enter Gallery",
                featured_tag: "Featured Work",
                intro_title: "Preserving the <br><span class='not-italic font-bold'>Ephemeral.</span>",
                quote_text: "To me, photography is more than just technique; it's a way to capture the purity of light and emotion at a singular moment. Every image is a chapter in my visual diary.",
                link_view_collections: "View Collections",
                link_view_all: "Browse Full Archive",
                photos_text: "Photos",
                journey_text: "Journaling",
                days_label: "Days"
            }
        };

        function setLanguage(lang) {
            localStorage.setItem('lang', lang);
            const t = translations[lang];
            
            // Cập nhật tất cả các phần tử có data-i18n
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.innerHTML = t[key];
            });

            // Cập nhật trạng thái nút bấm
            const btnVi = document.getElementById('btn-vi');
            const btnEn = document.getElementById('btn-en');
            if (lang === 'vi') {
                btnVi.classList.replace('opacity-40', 'opacity-100');
                btnVi.classList.add('text-accent');
                btnEn.classList.replace('opacity-100', 'opacity-40');
                btnEn.classList.remove('text-accent');
            } else {
                btnEn.classList.replace('opacity-40', 'opacity-100');
                btnEn.classList.add('text-accent');
                btnVi.classList.replace('opacity-100', 'opacity-40');
                btnVi.classList.remove('text-accent');
            }
            
            // Tải lại các album (để cập nhật nhãn "Photos/Ảnh")
            if(db) loadFeaturedAlbums();
        }

        // --- 2. JOURNEY COUNTER ---
        function updateDaysCounter() {
            const startDate = new Date('2026-01-01');
            const now = new Date();
            const diffTime = now - startDate;
            let days = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            // Nếu chưa đến ngày 1/1/2026, hiển thị 0 để tránh số âm
            if (days < 0) days = 0;
            
            const el = document.getElementById('days-count');
            if(el) el.innerText = days;
        }

        // --- 3. FIREBASE & DYNAMIC CONTENT ---
        if (!firebase.apps.length) firebase.initializeApp(CONFIG.firebase);
        const db = firebase.firestore();

        async function loadFeaturedAlbums() {
            const container = document.getElementById('featured-albums-container');
            const lang = localStorage.getItem('lang') || 'vi';
            const photosLabel = translations[lang].photos_text;

            try {
                const snapshot = await db.collection('albums').orderBy('createdAt', 'desc').limit(2).get();
                if (snapshot.empty) {
                    container.innerHTML = '<p class="text-zinc-500 italic text-sm">No albums published yet.</p>';
                    return;
                }

                let html = '';
                let index = 0;
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const cover = data.coverUrl ? data.coverUrl.replace('/upload/', '/upload/w_1000,f_auto,q_auto/') : 'https://placehold.co/600x800?text=No+Cover';
                    const mtClass = (index === 1) ? 'md:mt-12' : '';
                    
                    html += `
                        <a href="view-collection.html?id=${doc.id}" class="group relative aspect-[3/4] overflow-hidden bg-zinc-100 dark:bg-zinc-900 rounded-sm ${mtClass} animate-fade-in">
                            <img src="${cover}" class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110" alt="${data.title}">
                            <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <div class="absolute bottom-6 left-6 text-white translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                                <p class="text-[10px] uppercase tracking-[0.3em] font-bold mb-1">0${index + 1}</p>
                                <h3 class="font-serif text-2xl italic">${data.title}</h3>
                                <p class="text-[8px] uppercase tracking-widest opacity-60 mt-2">${data.photoCount || 0} ${photosLabel}</p>
                            </div>
                        </a>`;
                    index++;
                });
                container.innerHTML = html;
            } catch (e) { console.error(e); }
        }

        // --- 4. INIT & EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            const currentLang = localStorage.getItem('lang') || 'vi';
            setLanguage(currentLang);
            updateDaysCounter();
            
            // Dark Mode Init
            const html = document.documentElement;
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                html.classList.add('dark');
            }
        });

        // Theme Toggle
        document.getElementById('theme-toggle').addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            }
        });

        // Navbar Scroll Effect
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            const navbar = document.getElementById('navbar');
            if (currentScroll > 50) navbar.classList.add('glass-nav', 'py-4');
            else navbar.classList.remove('glass-nav', 'py-4');
            if (currentScroll > lastScroll && currentScroll > 200) navbar.style.transform = 'translateY(-100%)';
            else navbar.style.transform = 'translateY(0)';
            lastScroll = currentScroll;
        });
    </script>
</body>
</html>
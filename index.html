<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thong Tran | Newbie Photographer</title>
    
    <!-- 1. RESOURCES -->
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Fonts - CẬP NHẬT: Thêm Inter & Playfair Display đồng bộ Admin -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Inter:wght@200;300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,700&display=swap&subset=vietnamese" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Config Tailwind -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'], // Đổi sang Inter cho giống Admin
                        serif: ['Playfair Display', 'serif'],
                        display: ['Cormorant Garamond', 'serif'],
                    },
                    colors: {
                        black: '#050505',
                        gold: '#C5A059',
                        offWhite: '#F3F3F3',
                        overlay: 'rgba(0,0,0,0.6)'
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    }
                }
            }
        }
    </script>
    
    <!-- Custom CSS -->
    <style>
        body { 
            background-color: #050505; 
            color: #F3F3F3; 
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        
        /* Typography Effects */
        .text-stroke {
            -webkit-text-stroke: 1px rgba(255,255,255,0.15);
            color: transparent;
            transition: all 0.5s ease;
        }
        .group:hover .text-stroke {
            -webkit-text-stroke: 1px #C5A059;
            color: transparent;
        }
        
        /* Preloader */
        #preloader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #C5A059; }

        /* Mix Blend Mode for Nav */
        .blend-mode { mix-blend-mode: difference; }
    </style>
</head>
<body class="antialiased selection:bg-gold selection:text-black">

    <!-- 2. PRELOADER -->
    <div id="preloader">
        <div class="text-center space-y-4">
            <!-- Logo Preloader Giống Admin -->
            <h1 class="font-serif text-5xl md:text-6xl italic font-bold text-white animate-pulse tracking-tighter">
                Thong Tran<span class="text-gold">.</span>
            </h1>
            <div class="w-32 h-[1px] bg-gold mx-auto"></div>
            <p class="text-[9px] uppercase tracking-[0.4em] text-white/50">Newbie Photographer</p>
        </div>
    </div>

    <!-- 3. NAVIGATION (Sticky & Minimal) -->
    <nav class="fixed top-0 w-full z-50 px-6 md:px-12 py-6 flex justify-between items-center transition-all duration-500 blend-mode" id="navbar">
        <!-- LOGO MỚI: Playfair Display Italic Bold -->
        <a href="index.html" class="group flex flex-col items-center justify-center">
            <span class="font-serif text-3xl md:text-4xl italic font-bold text-white group-hover:text-gold transition-colors duration-500 tracking-tighter">
                Thong Tran<span class="text-gold">.</span>
            </span>
            <span class="text-[8px] md:text-[9px] uppercase tracking-[0.4em] text-white/60 font-sans mt-1 group-hover:tracking-[0.6em] transition-all duration-500">
                Newbie Photographer
            </span>
        </a>
        
        <div class="hidden md:flex items-center gap-12 text-[10px] font-bold uppercase tracking-[0.25em] text-white">
            <a href="collection.html" class="hover:text-gold transition-colors relative group">
                Bộ Sưu Tập
                <span class="absolute -bottom-2 left-0 w-0 h-[1px] bg-gold transition-all duration-300 group-hover:w-full"></span>
            </a>
            <a href="about-me.html" class="hover:text-gold transition-colors relative group">
                Góc Nhìn
                <span class="absolute -bottom-2 left-0 w-0 h-[1px] bg-gold transition-all duration-300 group-hover:w-full"></span>
            </a>
            <a href="admin.html" class="opacity-30 hover:opacity-100 transition-opacity">
                Quản Trị
            </a>
        </div>

        <!-- Mobile Menu Button -->
        <button class="md:hidden text-white text-xl" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
    </nav>

    <!-- 4. HERO SECTION (Parallax) -->
    <header class="relative w-full h-screen flex flex-col justify-center items-center overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0 z-0">
            <div id="hero-bg-wrapper" class="w-full h-[120%] -mt-[10%] relative">
                <img src="https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?q=80&w=2622&auto=format&fit=crop" 
                     class="w-full h-full object-cover opacity-60" 
                     alt="Cinematic Background">
            </div>
            <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black"></div>
        </div>

        <!-- Hero Content -->
        <div class="relative z-10 text-center px-4">
            <div class="overflow-hidden mb-4">
                <p class="hero-reveal text-gold text-[10px] md:text-xs uppercase tracking-[0.4em] font-medium translate-y-full font-display">
                    EST. 2026 / Kể chuyện qua ảnh
                </p>
            </div>
            
            <div class="overflow-hidden">
                <!-- Đã xóa class "text-stroke" và thêm "text-white" để chữ rõ ràng -->
                <h1 class="hero-reveal font-display text-[12vw] md:text-[8vw] leading-[0.9] italic translate-y-full uppercase text-white">
                    My First Lens
                </h1>
            </div>

            <div class="mt-12 opacity-0 hero-fade">
                <a href="#featured-work" class="inline-flex items-center gap-4 text-[10px] uppercase tracking-[0.3em] hover:text-gold transition-colors duration-300 font-bold">
                    <span>Khám phá</span>
                    <i class="fas fa-arrow-down animate-bounce"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- 5. INTRO QUOTE -->
    <section class="py-32 px-6 md:px-24 w-full bg-black relative z-10">
        <div class="max-w-screen-xl mx-auto text-center">
            <i class="fas fa-quote-left text-gold/30 text-2xl mb-8 block"></i>
            
            <!-- Representative Quote (Câu nói đại diện) -->
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-display leading-tight text-white mb-8 reveal-text opacity-0 translate-y-10">
                "Gom nhặt <span class="text-gold font-serif italic text-4xl md:text-6xl mx-2 relative -top-1">bình yên</span>, cất vào khung ảnh."
            </h2>
            
            <!-- Intro Text (Xưng 'Mình') -->
            <p class="text-sm md:text-lg font-light leading-relaxed text-white/70 max-w-3xl mx-auto reveal-text opacity-0 translate-y-10">
                Chào bạn, mình là Thông. Với mình, nhiếp ảnh không chỉ là việc bấm máy, mà là cách mình trò chuyện với thế giới. Mình muốn lưu giữ những rung động khẽ khàng nhất, nơi ánh sáng và bóng tối kể câu chuyện của riêng chúng, để mỗi khoảnh khắc trôi qua đều trở thành một ký ức đẹp.
            </p>
            
            <div class="mt-12 w-16 h-[1px] bg-white/20 mx-auto"></div>
        </div>
    </section>

    <!-- 6. FEATURED WORKS (Dynamic from Firebase) -->
    <section id="featured-work" class="py-20 bg-black relative z-10">
        <div class="px-6 md:px-12 mb-20 flex items-end justify-between border-b border-white/10 pb-6 max-w-screen-2xl mx-auto">
            <div>
                <span class="text-gold text-[10px] uppercase tracking-[0.4em] block mb-2 font-display">Danh Mục</span>
                <h3 class="font-display text-3xl md:text-5xl text-white">Tác Phẩm Tiêu Biểu</h3>
            </div>
            <a href="collection.html" class="hidden md:block text-[10px] uppercase tracking-[0.2em] hover:text-gold transition-colors font-bold">
                Xem toàn bộ <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>

        <div id="dynamic-albums" class="max-w-screen-2xl mx-auto px-6 md:px-12 space-y-32">
            <!-- Content will be loaded by JS -->
            <!-- Loading Skeleton -->
            <div class="animate-pulse space-y-4">
                <div class="h-[60vh] bg-white/5 w-full rounded-sm"></div>
                <div class="h-8 bg-white/5 w-1/3"></div>
            </div>
        </div>

        <div class="md:hidden text-center mt-12">
            <a href="collection.html" class="inline-block border border-white/20 px-8 py-4 text-[10px] uppercase tracking-[0.2em] hover:bg-gold hover:border-gold hover:text-black transition-all">
                Xem toàn bộ thư viện
            </a>
        </div>
    </section>

    <!-- 7. MARQUEE BANNER -->
    <section class="py-24 bg-[#0a0a0a] overflow-hidden border-t border-white/5 relative">
        <div class="absolute inset-0 bg-gradient-to-r from-black via-transparent to-black z-10 pointer-events-none"></div>
        <div class="whitespace-nowrap flex animate-[marquee_30s_linear_infinite]">
            <!-- Repeat content to create seamless loop -->
            <span class="text-[10vh] md:text-[15vh] font-display font-bold text-white/5 px-10">CẢM XÚC</span>
            <span class="text-[10vh] md:text-[15vh] font-display italic text-white/5 px-10">KÝ ỨC</span>
            <span class="text-[10vh] md:text-[15vh] font-display font-bold text-white/5 px-10">GÓC NHÌN</span>
            <span class="text-[10vh] md:text-[15vh] font-display italic text-white/5 px-10">ÁNH SÁNG</span>
            <span class="text-[10vh] md:text-[15vh] font-display font-bold text-white/5 px-10">CẢM XÚC</span>
            <span class="text-[10vh] md:text-[15vh] font-display italic text-white/5 px-10">KÝ ỨC</span>
        </div>
    </section>

    <!-- 8. FOOTER -->
    <footer class="bg-black pt-20 pb-10 px-6 border-t border-white/10">
        <div class="max-w-screen-2xl mx-auto flex flex-col md:flex-row justify-between items-center gap-10">
            <div class="text-center md:text-left">
                <!-- Footer Logo -->
                <h4 class="font-serif text-4xl italic font-bold text-white mb-2 tracking-tighter">Thong Tran<span class="text-gold">.</span></h4>
                <p class="text-[10px] uppercase tracking-[0.2em] text-white/40">Người kể chuyện bằng hình ảnh tại Việt Nam</p>
            </div>
            
            <div class="flex gap-8">
                <a href="#" class="w-10 h-10 rounded-full border border-white/10 flex items-center justify-center text-white/60 hover:border-gold hover:text-gold hover:bg-gold/10 transition-all">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="#" class="w-10 h-10 rounded-full border border-white/10 flex items-center justify-center text-white/60 hover:border-gold hover:text-gold hover:bg-gold/10 transition-all">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="w-10 h-10 rounded-full border border-white/10 flex items-center justify-center text-white/60 hover:border-gold hover:text-gold hover:bg-gold/10 transition-all">
                    <i class="fas fa-envelope"></i>
                </a>
            </div>
        </div>
        <div class="text-center mt-16 text-[9px] uppercase tracking-widest text-white/20">
            &copy; 2026 My First Lens. Mọi quyền được bảo lưu.
        </div>
    </footer>

    <!-- 9. SCRIPTS & LOGIC -->
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <!-- Config File (User's file) -->
    <script src="config.js"></script>

    <script>
        // --- A. PRELOADER & ANIMATIONS ---
        window.addEventListener('load', () => {
            const tl = gsap.timeline();
            
            // 1. Hide Preloader
            tl.to("#preloader", {
                yPercent: -100,
                duration: 1,
                ease: "power4.inOut",
                delay: 0.5
            })
            // 2. Reveal Hero Text
            .to(".hero-reveal", {
                y: 0,
                duration: 1.2,
                stagger: 0.1,
                ease: "power3.out"
            }, "-=0.5")
            // 3. Fade in button
            .to(".hero-fade", {
                opacity: 1,
                duration: 1,
                delay: 0.2
            });

            // 4. Parallax Hero Image
            gsap.to("#hero-bg-wrapper", {
                scrollTrigger: {
                    trigger: "header",
                    start: "top top",
                    end: "bottom top",
                    scrub: true
                },
                yPercent: 20,
                ease: "none"
            });

            // 5. Reveal Text on Scroll
            gsap.utils.toArray('.reveal-text').forEach(element => {
                gsap.to(element, {
                    scrollTrigger: {
                        trigger: element,
                        start: "top 80%",
                        toggleActions: "play none none reverse"
                    },
                    opacity: 1,
                    y: 0,
                    duration: 1,
                    ease: "power3.out"
                });
            });
        });

        // --- B. FIREBASE DYNAMIC CONTENT ---
        if (!firebase.apps.length) firebase.initializeApp(CONFIG.firebase);
        const db = firebase.firestore();

        async function loadFeaturedAlbums() {
            const container = document.getElementById('dynamic-albums');
            
            try {
                // Fetch 3 most recent albums
                const snapshot = await db.collection('albums')
                    .orderBy('createdAt', 'desc')
                    .limit(3)
                    .get();

                if (snapshot.empty) {
                    container.innerHTML = '<p class="text-center text-white/40 italic">Chưa có album nào được xuất bản.</p>';
                    return;
                }

                let html = '';
                snapshot.forEach((doc, index) => {
                    const data = doc.data();
                    // High quality cover for featured section
                    const cover = data.coverUrl 
                        ? data.coverUrl.replace('/upload/', '/upload/w_1600,f_auto,q_auto/') 
                        : 'https://via.placeholder.com/1600x900?text=No+Content';
                    
                    const year = data.dateTaken ? new Date(data.dateTaken).getFullYear() : '2026';
                    
                    // Layout logic: Alternate Image Left/Right
                    const isEven = index % 2 === 0;

                    html += `
                    <div class="group relative w-full reveal-item opacity-0 translate-y-20 transition-all duration-1000">
                        <a href="view-collection.html?id=${doc.id}" class="block">
                            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-center">
                                
                                <!-- Image Side -->
                                <div class="lg:col-span-8 ${isEven ? 'lg:order-1' : 'lg:order-2'} relative overflow-hidden">
                                    <div class="aspect-[16/9] lg:aspect-[21/9] overflow-hidden">
                                        <img src="${cover}" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-[1.5s] ease-out group-hover:scale-105" alt="${data.title}">
                                    </div>
                                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-500"></div>
                                </div>

                                <!-- Text Side -->
                                <div class="lg:col-span-4 ${isEven ? 'lg:order-2 lg:pl-8' : 'lg:order-1 lg:pr-8 text-right'} space-y-4 z-10 relative">
                                    <div class="flex items-center gap-4 ${isEven ? '' : 'justify-end'} text-gold text-[10px] font-bold uppercase tracking-[0.2em]">
                                        <span>0${index + 1}</span>
                                        <span class="w-8 h-[1px] bg-gold"></span>
                                        <span>${year}</span>
                                    </div>
                                    
                                    <h2 class="font-display text-4xl md:text-5xl lg:text-6xl text-white leading-tight">
                                        ${data.title}
                                    </h2>
                                    
                                    <p class="text-white/50 text-sm font-light line-clamp-2 max-w-md ${isEven ? '' : 'ml-auto'}">
                                        ${data.description || 'Khám phá bộ sưu tập hình ảnh đầy cảm xúc.'}
                                    </p>
                                    
                                    <div class="pt-6">
                                        <span class="inline-block px-6 py-3 border border-white/20 text-[9px] uppercase tracking-[0.25em] group-hover:bg-gold group-hover:border-gold group-hover:text-black transition-all font-bold">
                                            Xem Chi Tiết
                                        </span>
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>`;
                });

                container.innerHTML = html;

                // Trigger animations for new elements
                gsap.utils.toArray('.reveal-item').forEach(element => {
                    gsap.to(element, {
                        scrollTrigger: {
                            trigger: element,
                            start: "top 85%",
                        },
                        opacity: 1,
                        y: 0,
                        duration: 1.2,
                        ease: "power3.out"
                    });
                });

            } catch (e) {
                console.error("Error loading albums:", e);
                container.innerHTML = '<p class="text-center text-red-500 text-sm">Lỗi tải dữ liệu. Vui lòng kiểm tra console.</p>';
            }
        }

        // Init load
        loadFeaturedAlbums();

        // --- C. UTILITIES ---
        function toggleMobileMenu() {
            alert("Mobile menu functionality coming soon in full version.");
        }
    </script>
    
    <!-- Add simple keyframes for marquee -->
    <style>
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
    </style>
</body>
</html>